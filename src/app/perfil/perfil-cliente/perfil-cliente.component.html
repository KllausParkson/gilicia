<ion-content scroll-y="true" *ngIf="perfilUsuario">
  <ion-grid class="top">
    <ion-row class="ion-justify-content-center">
      <ion-col size-xs="12" size-sm="10" size-md="7" size-lg="6" size-xl="5">
        <ion-row class="ion-no-padding">
          <ion-col size="12">
            <ion-row class="ion-justify-content-center">
              <ion-col class="column" size="7">
                <ion-label class="bold">{{ perfilUsuario.nome }}</ion-label>

                <ion-label class="small">{{
                  perfilUsuario.celular || ("PERFIL.NAOTEMCELULAR" | translate)
                }}</ion-label>
              </ion-col>

              <!--botão modal pontos (milhagem) do perfil aqui-->
              <ion-col class="column" size="5">
                <ion-button
                  shape="round"
                  size="medium"
                  
                  (click)="mostrarFidelidadeOnepoints()"
                  style="--background: var(--cor-fundo-botaoAgendar)"
                  ><ion-text
                    style="
                      text-transform: initial;
                      color: var(--cor-texto-botaoAgendar);
                    "
                    >{{ "PERFIL.VANTAGENS" | translate
                    }}<!-- {{'PERFIL.MODALONEPOINTS.TITLE' | translate}} --></ion-text
                  ></ion-button

                >
              </ion-col>
              <!--texto de milhagens da pagina<ion-col *ngIf="milhagem?.usaMilhagem" class="column ion-text-end ion-align-self-end" size="4">
                <ion-label class="small" style="padding-right: 2px;">{{'PERFIL.PONTUACAO' | translate}}</ion-label>
                <ion-label class="secondary">{{milhagem.pontosCliente}} {{'PERFIL.PONTOS' | translate}}</ion-label>
                <ion-label class="smaller">{{'PERFIL.MINIMO' | translate}} {{milhagem.pontosMin}} {{'PERFIL.PONTOS' | translate}}</ion-label>
              </ion-col>-->
              
            </ion-row>
            <ion-row class="ion-justify-content-center">
              <ion-col class="column" size="7">
                <ion-label class="small">{{ perfilUsuario.email }}</ion-label>
                <ion-label class="small">{{
                  perfilUsuario.aniversario | date: "shortDate"
                }}</ion-label>
              </ion-col>

              <ion-col style="text-align: -webkit-center" size="5">
                <ion-fab-button style="--background: var(--cor-fundo-botaoAgendar)" (click)="openEditarPerfilModal()" size="small"
                  ><ion-icon
                    name="pencil-sharp"
                    style="
                      transform: scale(0.8);
                      color: var(--cor-texto-botaoAgendar);
                    "
                  ></ion-icon>
                </ion-fab-button>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="appidExclusivo == '1'" style="text-align: start;">
          <ion-col size="auto" style="place-self: center;">
            <ion-text class="bold" style="font-weight: bold; color: var(--ion-color-primary);">
              Modo Escuro
            </ion-text>
            
            
          </ion-col>
          <ion-toggle mode="md" [checked]="flagTema" (ionChange)="modoEscuro($event)"></ion-toggle>


        </ion-row>
        
        <ion-row *ngIf="appidExclusivo == 1" class="empresas">
          <ion-col class="list" size="12" *ngIf="mobilidade">
            <div class="itens" [ngClass]="{empresaSelecionada: empresa.nomeEmpresaFilial === empresaAtual.nomeEmpresaFilial}" lines="none" *ngFor="let empresa of mobilidade; index as i">
              <div class="img-wrapper" *ngIf="i===0">
                <img src="{{empresa.logoMarca || semLogo}}" class="select">
              </div>
              <p *ngIf="i===0" style="line-height:1.9;">{{empresa.nomeEmpresaFilial}}</p>

              
              <div class="img-wrapper" *ngIf="i!==0" (click)="confirmaEstabelecimento(empresa)">
                <img src="{{empresa.logoMarca || semLogo}}" class="select">
              </div>
              <p *ngIf="i!==0" (click)="confirmaEstabelecimento(empresa)">{{empresa.nomeEmpresaFilial}}</p>
              <!--<p>{{empresa.nomeEmpresaFilial}}</p>-->
            </div>
          </ion-col>
          <ion-row style="width: 100%; height: 35px;">
              <ion-button id="select_est" (click)="abrirModalEscolherEstabelecimento()">{{'PERFIL.ESCOLHERESTABELECIMENTO' | translate}}</ion-button>
          </ion-row>
        </ion-row>

      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid class="bottom">
    <ion-segment mode="md" [(ngModel)]="segment" value="historico">
      <ion-segment-button
        value="historico"
        style="color: var(--cor-texto-geral)"
      >
        <ion-label>{{ "PERFIL.HISTORICO" | translate }}</ion-label>
      </ion-segment-button>
    </ion-segment>
    <ion-row class="lista ion-justify-content-center">
      <ion-col size-xl="6" size-lg="6" size-md="4">
        <div [ngSwitch]="segment">
          <div *ngSwitchCase="'historico'">
            <app-card-historico-cliente
              *ngFor="let h of historico"
              [data]="h.data"
              [produtos]="h.produtos"
              [servicos]="h.servicos"
              [valorTotal]="h.valorTotal"
            >
            </app-card-historico-cliente>

            <div *ngIf="historico?.length == 0" class="historico-vazio">
              <ion-icon
                style="margin-right: 2px"
                name="alert-circle-outline"
              ></ion-icon>
              <ion-label>{{ "PERFIL.NAOTEMHISTORICO" | translate }}</ion-label>
            </div>
            <ion-col size="2"></ion-col>
            <div *ngIf="historico?.length > 0">
              <ion-col size="10">
                <ion-row
                  class="ion-justify-content-center"
                  *ngIf="!acabouHistorico"
                >
                  <ion-button
                    class="button"
                    (click)="loadData($event)"
                    
                    type="button"
                    style="--background: var(--cor-fundo-botaoAgendar)"
                  >
                    <ion-text style= "color: var(--cor-texto-botaoAgendar);">
                      {{ "PERFIL.CARREGAR" | translate }}
                    </ion-text>
                  </ion-button>
                </ion-row>
              </ion-col>
            </div>
            <br /><br /><br />
            <!--espaça o botão carregar mais (página histórico-cliente) em relação a barra agenda-perfil-opções -->
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<app-menu></app-menu>
